<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="ncnu.gif"">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>暨大課程資訊</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB"
        crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
</head>

<body>
    <div class="container p-3" id="app">
        <h2>暨大課程資訊查詢</h2>
        <div class="bg-info text-white p-3 mb-3">
            1. 資料大約 8/23 PM 23:30 後會比較準確
            <br>
            2. 目前支援通識及特色運動查詢
        </div>
        <select class="mb-3" v-model="chosenClass">
            <option value="other" selected>通識</option>
            <option value="sport">特色運動</option>
        </select>
        <div class="input-group mb-3">
            <div class="input-group-prepend">
                <span class="input-group-text">搜尋關鍵字</span>
            </div>
            <input type="text" class="form-control" placeholder="只支援搜尋課程名稱" v-model="filterText">
        </div>
        <div class="table-responsive">
            <table class="table table-striped table-hover">
                <thead>
                    <tr>
                        <th scope="col">課名</th>
                        <th scope="col">上課時間</th>
                        <th scope="col">老師</th>
                        <th scope="col">人數上限</th>
                        <th scope="col">當前人數</th>
                        <th scope="col">還有多久解鎖</th>
                    </tr>
                </thead>
                <tbody>
                    <tr v-for="(item, key) in myClass">
                        <th scope="row">{{ key }}</th>
                        <td>{{ item.time }}</td>
                        <td>{{ item.teacher }}</td>
                        <td>{{ item.limit }}</td>
                        <td>{{ item.seleced_no }}</td>
                        <td>{{ (item.lock == true) ? Math.floor(360-(Date.now() - parseInt(item.startTime))/1000/60) : 0}} 分鐘</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>


    <script src="https://www.gstatic.com/firebasejs/5.4.0/firebase.js"></script>
    <script>
        // Initialize Firebase
        var config = {
            apiKey: "AIzaSyBkI3hRVzBvE60PnEfu93go0J88jg6f3C0",
            authDomain: "ncnuclass.firebaseapp.com",
            databaseURL: "https://ncnuclass.firebaseio.com",
            projectId: "ncnuclass",
            storageBucket: "ncnuclass.appspot.com",
            messagingSenderId: "752360146828"
        };
        firebase.initializeApp(config);
    </script>
    <script src="js/script.js"></script>
</body>

</html>